{% extends "base.html" %} {% block title %}Tokens{% endblock %} {% block content
%}
<h2 class="text-xl font-semibold mb-4">ðŸ’° TokenizaÃ§Ã£o de Obras</h2>

<!-- Emitir Token -->
<h3 class="font-semibold">1. Emitir Token</h3>
<input
  type="number"
  id="mintArtworkId"
  placeholder="Artwork ID"
  class="w-full border p-2 mt-2"
/>
<input
  type="number"
  id="mintOwnerId"
  placeholder="Owner ID"
  class="w-full border p-2 mt-2"
/>
<button
  onclick="mintToken()"
  class="bg-teal-700 text-white px-4 py-2 rounded mt-2"
>
  Emitir Token
</button>
<pre id="mintResult" class="bg-gray-100 p-2 rounded mt-2"></pre>

<hr class="my-6" />

<!-- Consultar Token -->
<h3 class="font-semibold">2. Consultar Token</h3>
<input
  type="number"
  id="queryTokenId"
  placeholder="Token ID"
  class="w-full border p-2 mt-2"
/>
<button
  onclick="queryToken()"
  class="bg-gray-700 text-white px-4 py-2 rounded mt-2"
>
  Consultar Token
</button>
<pre id="queryResult" class="bg-gray-100 p-2 rounded mt-2"></pre>

<script>
  async function mintToken() {
    const artworkId = parseInt(document.getElementById("mintArtworkId").value);
    const ownerId = parseInt(document.getElementById("mintOwnerId").value);
    try {
      const resp = await axios.post("/tokens/mint", {
        artwork_id: artworkId,
        owner_id: ownerId,
      });
      document.getElementById("mintResult").textContent = JSON.stringify(
        resp.data,
        null,
        2
      );
    } catch (err) {
      document.getElementById("mintResult").textContent =
        err.response?.data?.detail || "Erro ao emitir token.";
    }
  }

  async function queryToken() {
    const tokenId = document.getElementById("queryTokenId").value;
    try {
      const resp = await axios.get(`/tokens/${tokenId}`);
      document.getElementById("queryResult").textContent = JSON.stringify(
        resp.data,
        null,
        2
      );
    } catch (err) {
      document.getElementById("queryResult").textContent =
        err.response?.data?.detail || "Erro ao consultar token.";
    }
  }
</script>
{% endblock %}
