# ðŸ§¬ Projeto Blockchain Educacional com Suporte a MÃºltiplos Peers

Este projeto Ã© uma implementaÃ§Ã£o didÃ¡tica de uma **blockchain simplificada** com suporte a **transaÃ§Ãµes digitais assinadas**, **validaÃ§Ã£o de integridade**, **sincronizaÃ§Ã£o entre nÃ³s (peers)** e uma interface **web responsiva** para interaÃ§Ã£o.

---

## âš™ï¸ Como funciona

A blockchain aqui implementada funciona como um **livro-razÃ£o distribuÃ­do**, onde:

- Cada **bloco** contÃ©m um conjunto de **transaÃ§Ãµes**.
- As transaÃ§Ãµes sÃ£o **assinadas digitalmente** com chaves ECDSA.
- A mineraÃ§Ã£o usa uma prova de trabalho simples (nonce + hash com prefixo de zeros).
- A integridade da cadeia Ã© verificada por `hashes` encadeados e assinaturas.
- MÃºltiplos nÃ³s (peers) podem ser conectados e sincronizados com base na **cadeia mais longa**.

---

## ðŸ§± Estrutura do CÃ³digo

### `block_class.py`
ContÃ©m as classes principais:
- **`Transaction`**: representa uma transaÃ§Ã£o assinada.
- **`Block`**: representa um bloco da cadeia, contendo transaÃ§Ãµes, hash, nonce etc.

### `blockchain.py`
- **`Blockchain`**: classe que gerencia a cadeia de blocos, mineraÃ§Ã£o, validaÃ§Ã£o, adicao de transaÃ§Ãµes e sincronizaÃ§Ã£o.

### `blockchain_enhanced_full.py`
- Servidor **FastAPI** com endpoints REST para:
  - GeraÃ§Ã£o de chaves
  - Assinatura de transaÃ§Ã£o
  - Envio e mineraÃ§Ã£o
  - ValidaÃ§Ã£o de cadeia
  - ExportaÃ§Ã£o/importaÃ§Ã£o da blockchain
  - Registro e sincronizaÃ§Ã£o de peers

---

## ðŸŒ Interface Web (Frontend)

### Arquivo: `webui.html`

Permite interagir com o backend:

- âœ… **Gerar Par de Chaves** (ECDSA)
- âœ‰ï¸ **Preencher dados e Assinar TransaÃ§Ã£o**
- â†—ï¸ **Enviar TransaÃ§Ã£o** ao pool
- ðŸ’° **Minerar um Bloco** com as transaÃ§Ãµes pendentes
- â›”ï¸ **Hackear um Bloco** para simular ataque
- âœ… **Verificar Integridade da Cadeia**
- ðŸ“ƒ **Exportar Blockchain**
- ðŸ’¾ **Importar Blockchain** de outro peer
- ðŸ”— **Registrar Peer** (ex: http://localhost:8001)
- â†» **Sincronizar com Peers** (adoÃ§Ã£o da cadeia mais longa)

---

## ðŸš€ Suporte a MÃºltiplos Peers

### Recursos implementados:
- Cada instÃ¢ncia FastAPI Ã© um **nÃ³ independente**
- Os peers se comunicam via HTTP para:
  - Registrar-se entre si (`/peers/register`)
  - Exportar suas cadeias (`/export`)
  - Sincronizar com base na cadeia mais longa (`/peers/sync`)

### ðŸ”„ Como funciona a sincronizaÃ§Ã£o

Quando o usuÃ¡rio clica no botÃ£o **â€œSincronizar com Peersâ€** na interface `webui.html` de um determinado nÃ³ (ex: `localhost:8000`), o frontend faz uma requisiÃ§Ã£o `GET` para o endpoint `/peers/sync` deste nÃ³. A partir disso, o processo segue os seguintes passos:


1. **Registro de Peers**
   - O usuÃ¡rio fornece a URL de outro nÃ³ por meio da interface ou da API (`/peers/register?peer_url=...`).
   - O nÃ³ atual armazena essa URL como peer conhecido.

2. **ExportaÃ§Ã£o de Cadeia**
   - Quando um nÃ³ deseja sincronizar, ele faz requisiÃ§Ãµes `GET /export` para cada peer registrado.
   - Cada peer responde com a sua blockchain completa.

3. **ComparaÃ§Ã£o e SubstituiÃ§Ã£o**
   - O nÃ³ local verifica qual das cadeias recebidas dos peers Ã© **mais longa** e **vÃ¡lida** (`is_chain_valid`).
   - Se houver uma cadeia mais longa e vÃ¡lida do que a sua, ele a **substitui automaticamente**.

4. **CritÃ©rio de Consenso**
   - A blockchain mais longa Ã© considerada a correta (estratÃ©gia clÃ¡ssica usada no Bitcoin e Ethereum).

Esse processo garante que todos os nÃ³s eventualmente compartilhem o mesmo estado da blockchain, mesmo apÃ³s divergÃªncias.

### ðŸ§ª Exemplo de uso via API (insomnia, postman ou axios)

```bash
# Registrar um peer
curl -X POST "http://localhost:8000/peers/register" -H "Content-Type: application/json" -d '"http://localhost:8001"'

# Exportar cadeia
curl http://localhost:8001/export

# Sincronizar com peers
curl http://localhost:8000/peers/sync
```

Essas chamadas permitem automatizar a comunicaÃ§Ã£o entre nÃ³s e testar a robustez do consenso entre cadeias.

---

## ðŸ› ï¸ InstalaÃ§Ã£o

```bash
# Clone o repositÃ³rio
$ git clone https://github.com/seuusuario/blockchain_full.git
$ cd blockchain_full

# Crie e ative um ambiente virtual
$ python -m venv venv
$ source venv/bin/activate  # ou venv\Scripts\activate no Windows

# Instale as dependÃªncias
$ pip install -r requirements.txt
```

---

## ðŸŽ“ Testando localmente

### 1. Execute um nÃ³
```bash
uvicorn blockchain_enhanced_full_cors:app --reload --port 8000
```

### 2. Em outro terminal, outro nÃ³
```bash
uvicorn blockchain_enhanced_full_cors:app --reload --port 8001
```

### 3. Acesse em diferentes abas do navegador:
- [http://localhost:8000/webui.html](http://localhost:8000/webui.html)
- [http://localhost:8001/webui.html](http://localhost:8001/webui.html)

---

## ðŸ”§ Tecnologias usadas
- Python 3.10+
- FastAPI + Uvicorn
- Tailwind CSS
- HTML5 + JS (com axios)
- ECDSA para assinaturas

---

## ðŸŒŸ Autor
**Fabio** â€” Projeto educacional para exploraÃ§Ã£o de blockchains, seguranÃ§a e descentralizaÃ§Ã£o com IA e interaÃ§Ã£o web.

> Sinta-se Ã  vontade para usar, modificar e evoluir este projeto!




